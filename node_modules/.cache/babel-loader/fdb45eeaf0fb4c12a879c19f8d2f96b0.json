{"ast":null,"code":"var _jsxFileName = \"/Users/adienerlopez/Desktop/REACT_EPICODE/ESERCIZI/giono_1_sett_2/src/components/CommentArea.jsx\";\nimport { Component } from 'react';\nimport CommentList from './CommentList';\nimport AddComment from './AddComment';\nimport Loading from './Loading';\nimport Error from './Error';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CommentArea extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      comments: [],\n      // comments will go here\n      isLoading: true,\n      isError: false\n    };\n\n    this.componentDidUpdate = prevProps => {\n      if (prevProps.asinBook !== this.props.asinBook) {\n        this.fetchComments();\n      }\n    };\n\n    this.fetchComments = async () => {\n      try {\n        let response = await fetch('https://striveschool-api.herokuapp.com/api/comments/' + this.props.asinBook, {\n          headers: {\n            Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MjAyOTIxNzAwOTM4MjAwMTVkNjlkNGQiLCJpYXQiOjE2NjIwMjMxMjcsImV4cCI6MTY2MzIzMjcyN30.I6b0OH9Z19fA56gR_JN7igfZg1dCjRkXr39-NUxd1iE'\n          }\n        });\n        console.log(response);\n\n        if (response.ok) {\n          let comments = await response.json();\n          this.setState({\n            comments: comments,\n            isLoading: false,\n            isError: false\n          });\n        } else {\n          console.log('error');\n          this.setState({\n            isLoading: false,\n            isError: true\n          });\n        }\n      } catch (error) {\n        console.log(error);\n        this.setState({\n          isLoading: false,\n          isError: true\n        });\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"b-comment\",\n      children: [this.state.isLoading && this.state.comments.length > 0 && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 45\n      }, this), this.state.isError && /*#__PURE__*/_jsxDEV(Error, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 32\n      }, this), this.state.comments.length > 0 && /*#__PURE__*/_jsxDEV(AddComment, {\n        asin: this.props.asinBook\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 44\n      }, this), /*#__PURE__*/_jsxDEV(CommentList, {\n        commentsToShow: this.state.comments\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default CommentArea;","map":{"version":3,"names":["Component","CommentList","AddComment","Loading","Error","CommentArea","state","comments","isLoading","isError","componentDidUpdate","prevProps","asinBook","props","fetchComments","response","fetch","headers","Authorization","console","log","ok","json","setState","error","render","length"],"sources":["/Users/adienerlopez/Desktop/REACT_EPICODE/ESERCIZI/giono_1_sett_2/src/components/CommentArea.jsx"],"sourcesContent":["import { Component } from 'react'\r\nimport CommentList from './CommentList'\r\nimport AddComment from './AddComment'\r\nimport Loading from './Loading'\r\nimport Error from './Error'\r\n\r\nclass CommentArea extends Component {\r\n  state = {\r\n    comments: [], // comments will go here\r\n    isLoading: true,\r\n    isError: false,\r\n  }\r\n  componentDidUpdate = (prevProps) => {\r\n    if (prevProps.asinBook !== this.props.asinBook) {\r\n      this.fetchComments();\r\n    }\r\n  }\r\n\r\n  fetchComments = async () => {\r\n    try {\r\n      let response = await fetch(\r\n        'https://striveschool-api.herokuapp.com/api/comments/' +\r\n        this.props.asinBook,\r\n        {\r\n          headers: {\r\n            Authorization:\r\n              'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MjAyOTIxNzAwOTM4MjAwMTVkNjlkNGQiLCJpYXQiOjE2NjIwMjMxMjcsImV4cCI6MTY2MzIzMjcyN30.I6b0OH9Z19fA56gR_JN7igfZg1dCjRkXr39-NUxd1iE',\r\n          },\r\n        }\r\n      )\r\n      console.log(response)\r\n      if (response.ok) {\r\n        let comments = await response.json()\r\n        this.setState({ comments: comments, isLoading: false, isError: false })\r\n      } else {\r\n        console.log('error')\r\n        this.setState({ isLoading: false, isError: true })\r\n      }\r\n    } catch (error) {\r\n      console.log(error)\r\n      this.setState({ isLoading: false, isError: true })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='b-comment'>\r\n        {this.state.isLoading &&\r\n          this.state.comments.length > 0 && <Loading />}\r\n        {this.state.isError && <Error />}\r\n        {this.state.comments.length > 0 && <AddComment asin={this.props.asinBook} />}\r\n\r\n        <CommentList commentsToShow={this.state.comments} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CommentArea\r\n"],"mappings":";AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,KAAP,MAAkB,SAAlB;;;AAEA,MAAMC,WAAN,SAA0BL,SAA1B,CAAoC;EAAA;IAAA;IAAA,KAClCM,KADkC,GAC1B;MACNC,QAAQ,EAAE,EADJ;MACQ;MACdC,SAAS,EAAE,IAFL;MAGNC,OAAO,EAAE;IAHH,CAD0B;;IAAA,KAMlCC,kBANkC,GAMZC,SAAD,IAAe;MAClC,IAAIA,SAAS,CAACC,QAAV,KAAuB,KAAKC,KAAL,CAAWD,QAAtC,EAAgD;QAC9C,KAAKE,aAAL;MACD;IACF,CAViC;;IAAA,KAYlCA,aAZkC,GAYlB,YAAY;MAC1B,IAAI;QACF,IAAIC,QAAQ,GAAG,MAAMC,KAAK,CACxB,yDACA,KAAKH,KAAL,CAAWD,QAFa,EAGxB;UACEK,OAAO,EAAE;YACPC,aAAa,EACX;UAFK;QADX,CAHwB,CAA1B;QAUAC,OAAO,CAACC,GAAR,CAAYL,QAAZ;;QACA,IAAIA,QAAQ,CAACM,EAAb,EAAiB;UACf,IAAId,QAAQ,GAAG,MAAMQ,QAAQ,CAACO,IAAT,EAArB;UACA,KAAKC,QAAL,CAAc;YAAEhB,QAAQ,EAAEA,QAAZ;YAAsBC,SAAS,EAAE,KAAjC;YAAwCC,OAAO,EAAE;UAAjD,CAAd;QACD,CAHD,MAGO;UACLU,OAAO,CAACC,GAAR,CAAY,OAAZ;UACA,KAAKG,QAAL,CAAc;YAAEf,SAAS,EAAE,KAAb;YAAoBC,OAAO,EAAE;UAA7B,CAAd;QACD;MACF,CAnBD,CAmBE,OAAOe,KAAP,EAAc;QACdL,OAAO,CAACC,GAAR,CAAYI,KAAZ;QACA,KAAKD,QAAL,CAAc;UAAEf,SAAS,EAAE,KAAb;UAAoBC,OAAO,EAAE;QAA7B,CAAd;MACD;IACF,CApCiC;EAAA;;EAsClCgB,MAAM,GAAG;IACP,oBACE;MAAK,SAAS,EAAC,WAAf;MAAA,WACG,KAAKnB,KAAL,CAAWE,SAAX,IACC,KAAKF,KAAL,CAAWC,QAAX,CAAoBmB,MAApB,GAA6B,CAD9B,iBACmC,QAAC,OAAD;QAAA;QAAA;QAAA;MAAA,QAFtC,EAGG,KAAKpB,KAAL,CAAWG,OAAX,iBAAsB,QAAC,KAAD;QAAA;QAAA;QAAA;MAAA,QAHzB,EAIG,KAAKH,KAAL,CAAWC,QAAX,CAAoBmB,MAApB,GAA6B,CAA7B,iBAAkC,QAAC,UAAD;QAAY,IAAI,EAAE,KAAKb,KAAL,CAAWD;MAA7B;QAAA;QAAA;QAAA;MAAA,QAJrC,eAME,QAAC,WAAD;QAAa,cAAc,EAAE,KAAKN,KAAL,CAAWC;MAAxC;QAAA;QAAA;QAAA;MAAA,QANF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EAUD;;AAjDiC;;AAoDpC,eAAeF,WAAf"},"metadata":{},"sourceType":"module"}